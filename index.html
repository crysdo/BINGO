<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bingo</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --paper:#fbf6ef;
      --ink:#2e2a23;
      --muted:#6e665b;
      --apple:#c6453a;
      --leaf:#5f7f50;
      --border:rgba(46,42,35,.18);
      --btn:#ffffffcc;
      --btnBorder:rgba(46,42,35,.20);
      --win:#2f7f5b;
      --winFillTop: rgba(95,127,80,.28);
      --winFillBot: rgba(95,127,80,.16);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:"Quicksand", system-ui;
      color:var(--ink);
      background: var(--paper);
    }

    .wrap{max-width:1100px;margin:0 auto;padding:20px}
    .controls{display:flex;gap:10px;justify-content:center;margin-bottom:14px}
    button{
      border-radius:999px;
      border:1px solid var(--btnBorder);
      background:var(--btn);
      padding:10px 14px;
      font-weight:700;
      cursor:pointer;
    }

    table{
      width:100%;
      border-spacing:8px;
      table-layout:fixed;
    }

    td{
      background:#fff;
      border:1px solid rgba(198,69,58,.38);
      border-radius:18px;
      padding:12px;
      text-align:center;
      cursor:pointer;
      position:relative;
      height:100px;
    }

    td.marked{
      background:rgba(198,69,58,.18);
      border-color:rgba(198,69,58,.8);
    }

    td.win{
      background:linear-gradient(180deg,var(--winFillTop),var(--winFillBot));
      border-color:var(--win);
    }

    td.free{
      font-weight:800;
      letter-spacing:.08em;
    }

    .toast{
      position:fixed;
      bottom:18px;
      left:50%;
      transform:translateX(-50%);
      background:#fff;
      padding:10px 14px;
      border-radius:999px;
      opacity:0;
      transition:.2s;
    }
    .toast.show{opacity:1}

    .bingoOverlay{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background:rgba(255,255,255,.6);
      backdrop-filter:blur(2px);
      opacity:0;
      visibility:hidden;
      transition:.25s;
      pointer-events:none;
    }
    .bingoOverlay.show{
      opacity:1;
      visibility:visible;
    }

    .bingoBanner{
      background:#fff;
      border-radius:20px;
      padding:24px;
      text-align:center;
      animation:pop .9s ease forwards;
    }
    @keyframes pop{
      0%{transform:scale(.9);opacity:0}
      60%{transform:scale(1.05);opacity:1}
      100%{transform:scale(1)}
    }

    .confetti{
      position:absolute;
      top:-10vh;
      animation:fall linear forwards;
    }
    @keyframes fall{
      to{transform:translateY(110vh) rotate(720deg);opacity:0}
    }
  </style>
</head>

<body>
<div class="wrap">
  <div class="controls">
    <button id="newCardBtn">üçé New Card</button>
    <button id="resetBtn">üß∫ Reset</button>
  </div>

  <table>
    <tbody id="bingoBody"></tbody>
  </table>
</div>

<div class="toast" id="toast"></div>

<div class="bingoOverlay" id="overlay">
  <div class="bingoBanner">
    <h2>BINGO üçè</h2>
    <p>New card coming up‚Ä¶</p>
  </div>
</div>

<script>
const SIZE = 5;
const FREE_INDEX = 12;
const HOLD_MS = 5000; // ‚≠ê‚≠ê‚≠ê 5 SECONDS ‚≠ê‚≠ê‚≠ê

let marks = new Array(25).fill(false);
let lock = false;

const body = document.getElementById("bingoBody");
const overlay = document.getElementById("overlay");
const toast = document.getElementById("toast");

function showToast(t){
  toast.textContent=t;
  toast.classList.add("show");
  setTimeout(()=>toast.classList.remove("show"),1500);
}

function buildCard(){
  body.innerHTML="";
  marks.fill(false);
  lock=false;

  let idx=0;
  for(let r=0;r<SIZE;r++){
    const tr=document.createElement("tr");
    for(let c=0;c<SIZE;c++){
      const td=document.createElement("td");
      td.dataset.i=idx;

      if(idx===FREE_INDEX){
        td.textContent="FREE";
        td.classList.add("free");
      } else {
        td.textContent="Item "+(idx+1);
      }

      td.onclick=()=>{
        if(lock) return;
        marks[idx]=!marks[idx];
        td.classList.toggle("marked",marks[idx]);
        checkBingo();
      };

      tr.appendChild(td);
      idx++;
    }
    body.appendChild(tr);
  }
}

function lines(){
  const l=[];
  for(let r=0;r<SIZE;r++) l.push([...Array(5)].map((_,i)=>r*5+i));
  for(let c=0;c<SIZE;c++) l.push([...Array(5)].map((_,i)=>i*5+c));
  l.push([0,6,12,18,24],[4,8,12,16,20]);
  return l;
}

function checkBingo(){
  for(const line of lines()){
    if(line.every(i=>marks[i])){
      triggerBingo(line);
      return;
    }
  }
}

function triggerBingo(line){
  lock=true;
  overlay.classList.add("show");

  line.forEach(i=>{
    document.querySelector(`[data-i="${i}"]`).classList.add("win");
  });

  for(let i=0;i<30;i++){
    const s=document.createElement("span");
    s.className="confetti";
    s.textContent=["üçé","üçè","‚ú®"][Math.floor(Math.random()*3)];
    s.style.left=Math.random()*100+"vw";
    s.style.fontSize=14+Math.random()*16+"px";
    s.style.animationDuration=2+Math.random()*2+"s";
    overlay.appendChild(s);
    setTimeout(()=>s.remove(),4000);
  }

  setTimeout(()=>{
    overlay.classList.remove("show");
    buildCard();
  },HOLD_MS);
}

document.getElementById("newCardBtn").onclick=()=>{
  buildCard();
  showToast("New card üçé");
};

document.getElementById("resetBtn").onclick=()=>{
  buildCard();
  showToast("Reset üß∫");
};

buildCard();
</script>
</body>
</html>
